---
import type { z } from "zod";
import type { ProductResult } from "../utils/schemas";

import ShopifyImage from "./ShopifyImage.svelte";
import Money from "./Money.svelte";

export interface Props {
  product: z.infer<typeof ProductResult>;
}
const { product } = Astro.props as Props;
---

<a
  href={`/products/${product?.handle}`}
  class="card-shell group overflow-hidden transition hover:-translate-y-1 hover:shadow-lg"
>
  <div class="relative aspect-[3/4] overflow-hidden bg-[#eee7e0]">
    <ShopifyImage
      classList="h-full w-full object-cover"
      loading="eager"
      image={product?.featuredImage}
      sizes={`
      (min-width: 1540px) 348px,
      (min-width: 1280px) 284px,
      (min-width: 1040px) 309px,
      (min-width: 780px) 348px,
      (min-width: 640px) 284px,
      calc(100vw - 48px)
    `}
    />
    <div
      class="absolute inset-0 z-10 grid items-end justify-items-center opacity-0 transition-all group-hover:bg-black/10 group-hover:opacity-100"
    >
      <span class="button w-full gap-3 rounded-none text-xs">
        Shop now
      </span>
    </div>
  </div>
  <div class="flex items-center justify-between px-5 py-4 text-sm text-[#0b0b0f]/80">
    <h3 class="font-medium tracking-wide">{product?.title}</h3>
    <p class="font-semibold text-[#0b0b0f]">
      <Money price={product?.variants.nodes[0].price} />
    </p>
  </div>
</a>
